# ðŸš€ Cloudflare Pages Deployment Guide

## Quick Deploy (GitHub Method - Recommended)

### Step 1: Prepare Your Repository

1. Create a new repository on GitHub
2. Push your code:

```bash
# Initialize git (if not already done)
git init

# Add all files
git add .

# Commit
git commit -m "Ready for Cloudflare Pages deployment"

# Add your GitHub repository as remote
git branch -M main
git remote add origin https://github.com/YOUR-USERNAME/YOUR-REPO.git

# Push
git push -u origin main
```

### Step 2: Connect to Cloudflare Pages

1. **Sign in to Cloudflare:**
   - Go to https://dash.cloudflare.com
   - Create a free account if you don't have one

2. **Create a new Pages project:**
   - Click **Workers & Pages** in the sidebar
   - Click **Create Application**
   - Select **Pages** tab
   - Click **Connect to Git**

3. **Connect GitHub:**
   - Authorize Cloudflare to access your GitHub
   - Select your repository

4. **Configure build settings:**
   ```
   Framework preset: Astro
   Build command: npm run build
   Build output directory: dist
   Node version: 18 or higher
   ```

5. **Add Environment Variables:**
   Click **Environment variables (advanced)** and add:
   
   ```
   PUBLIC_CONTENT_CSV_URL=your-csv-url
   PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name
   PUBLIC_WHATSAPP_NUMBER=+94771234567
   PUBLIC_BUSINESS_NAME=Your Business Name
   ```

6. **Deploy:**
   - Click **Save and Deploy**
   - Wait 2-3 minutes for the build
   - Your site will be live at `your-project.pages.dev`

---

## Alternative: Wrangler CLI Method

### Step 1: Install Wrangler

```bash
npm install -g wrangler
```

### Step 2: Login to Cloudflare

```bash
wrangler login
```

### Step 3: Build Your Site

```bash
npm run build
```

### Step 4: Deploy

```bash
npx wrangler pages deploy dist --project-name=your-site-name
```

---

## Post-Deployment Steps

### 1. Add Custom Domain (Optional)

1. Go to your Pages project settings
2. Click **Custom domains**
3. Click **Set up a custom domain**
4. Follow the instructions to add DNS records

### 2. Configure Environment Variables

**For Production:**
- Go to Settings â†’ Environment variables â†’ Production
- Add all your `.env` variables

**For Preview (optional):**
- Add variables for preview/staging environment

### 3. Set Up Auto-Deploy

With GitHub integration, every push to `main` automatically deploys to production!

**For branch previews:**
- Every pull request gets its own preview URL
- Perfect for testing before merging

---

## Environment Variables Checklist

Make sure to add these in Cloudflare Pages:

- [ ] `PUBLIC_CONTENT_CSV_URL` - Your Google Sheets CSV URL
- [ ] `PUBLIC_CLOUDINARY_CLOUD_NAME` - Your Cloudinary cloud name
- [ ] `PUBLIC_WHATSAPP_NUMBER` - Your WhatsApp number
- [ ] `PUBLIC_BUSINESS_NAME` - Your business name
- [ ] `PUBLIC_SHEET_CSV_URL` (if using separate CSVs)
- [ ] `PUBLIC_SERVICES_CSV_URL` (if using separate CSVs)
- [ ] `PUBLIC_TESTIMONIALS_CSV_URL` (if using separate CSVs)
- [ ] `PUBLIC_PORTFOLIO_CSV_URL` (if using separate CSVs)

---

## Troubleshooting

### Build Fails

**Issue:** Module not found
**Solution:** Make sure `package.json` has all dependencies

**Issue:** Node version error
**Solution:** Set Node version to 18+ in build settings

### Environment Variables Not Working

**Issue:** Variables show as `undefined`
**Solution:** 
1. Make sure variable names start with `PUBLIC_`
2. Redeploy after adding variables
3. Clear cache and redeploy

### CSS Not Loading

**Issue:** Styles not applied
**Solution:** Cloudflare Pages works perfectly with Astro + Tailwind by default

---

## Free Tier Limits

âœ… **What's Included FREE:**
- Unlimited sites
- Unlimited bandwidth
- Unlimited requests
- 500 builds/month
- 1 concurrent build
- Custom domains
- SSL certificates
- Global CDN

ðŸŽ‰ **Perfect for your website!**

---

## Useful Commands

```bash
# Build locally to test
npm run build

# Preview build locally
npm run preview

# Deploy via Wrangler
npx wrangler pages deploy dist

# Check deployment status
wrangler pages deployment list --project-name=your-site
```

---

## Next Steps After Deployment

1. âœ… Test your live site
2. âœ… Add Google Sheets CSV URLs in environment variables
3. âœ… Test product loading
4. âœ… Set up custom domain (optional)
5. âœ… Update Google Sheets with your content
6. âœ… Share your site! ðŸŽŠ

---

## Support

- **Cloudflare Docs:** https://developers.cloudflare.com/pages
- **Astro Docs:** https://docs.astro.build/en/guides/deploy/cloudflare
- **Community:** Cloudflare Discord

---

**Your site will be blazing fast on Cloudflare's global CDN! ðŸš€**
