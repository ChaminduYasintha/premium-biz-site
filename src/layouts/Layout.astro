---
const { title = "Premium Business", description = "Quality Products Delivered" } = Astro.props;

const WHATSAPP_NUMBER = import.meta.env.PUBLIC_WHATSAPP_NUMBER || "+94771234567";
const WHATSAPP_MESSAGE = import.meta.env.PUBLIC_WHATSAPP_MESSAGE || "Hello! I'm interested in your products.";
const BUSINESS_NAME = import.meta.env.PUBLIC_BUSINESS_NAME || "Premium Sri Lankan Business";

const navLinks = [
  { name: "Home", href: "/" },
  { name: "Products", href: "/#products" },
  { name: "Services", href: "/services" },
  { name: "Portfolio", href: "/portfolio" },
  { name: "About", href: "/#process" }, // reuse process as about/how-it-works for now
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} | {BUSINESS_NAME}</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  </head>
  <body class="font-sans antialiased bg-stone-50 text-stone-800 selection:bg-amber-100 selection:text-amber-900">
    
    <!-- ============================================ -->
    <!-- NAVBAR -->
    <!-- ============================================ -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-xl shadow-sm border-b border-stone-100 transition-all duration-300">
      <div class="container mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
          <!-- Logo -->
          <a href="/" class="flex items-center space-x-2 group">
            <div class="w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-amber-200/50 transition-all duration-300">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
              </svg>
            </div>
            <span class="text-xl font-bold bg-gradient-to-r from-stone-800 to-stone-600 bg-clip-text text-transparent group-hover:from-amber-600 group-hover:to-orange-600 transition-all duration-300">
              {BUSINESS_NAME}
            </span>
          </a>

          <!-- Desktop Nav -->
          <div class="hidden md:flex items-center space-x-8">
            {navLinks.map(link => (
              <a href={link.href} class="text-sm font-medium text-stone-600 hover:text-amber-600 transition-colors relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-amber-500 after:transition-all after:duration-300 hover:after:w-full">
                {link.name}
              </a>
            ))}
          </div>

          <!-- WhatsApp CTA Button -->
          <a 
            href={`https://wa.me/${WHATSAPP_NUMBER.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(WHATSAPP_MESSAGE)}`}
            target="_blank"
            rel="noopener noreferrer"
            class="hidden md:inline-flex items-center gap-2 bg-gradient-to-r from-stone-900 to-stone-800 hover:from-amber-600 hover:to-orange-600 text-white px-5 py-2.5 rounded-full text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300"
          >
            <span>Let's Talk</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </a>

           <!-- Mobile Menu Button (Simplified) -->
           <button class="md:hidden text-stone-600">
             <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
           </button>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="min-h-screen">
        <slot />
    </main>

    <!-- ============================================ -->
    <!-- FOOTER -->
    <!-- ============================================ -->
    <footer class="bg-stone-900 text-stone-400 py-16">
      <div class="container mx-auto px-4">
        <div class="grid md:grid-cols-4 gap-12">
          
          <!-- Brand -->
          <div class="col-span-1 md:col-span-2">
            <div class="flex items-center space-x-2 mb-6">
              <div class="w-8 h-8 bg-gradient-to-br from-amber-500 to-orange-600 rounded flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
              </div>
              <span class="text-xl font-bold text-white">{BUSINESS_NAME}</span>
            </div>
            <p class="text-sm leading-relaxed max-w-sm mb-6">
              We provide exceptional products and services designed to elevate your lifestyle. Quality, trust, and excellence in every delivery.
            </p>
          </div>

          <!-- Quick Links -->
          <div>
            <h3 class="text-white font-semibold mb-6">Explore</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="/services" class="hover:text-amber-500 transition-colors">Services</a></li>
              <li><a href="/portfolio" class="hover:text-amber-500 transition-colors">Portfolio</a></li>
              <li><a href="/#products" class="hover:text-amber-500 transition-colors">Products</a></li>
              <li><a href="/about" class="hover:text-amber-500 transition-colors">About Us</a></li>
            </ul>
          </div>

          <!-- Contact -->
          <div>
            <h3 class="text-white font-semibold mb-6">Contact</h3>
            <ul class="space-y-3 text-sm">
              <li class="flex items-center gap-3">
                 <svg class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                 <span>{WHATSAPP_NUMBER}</span>
              </li>
              <li>
                <a 
                  href={`https://wa.me/${WHATSAPP_NUMBER.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(WHATSAPP_MESSAGE)}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-amber-500 hover:text-amber-400 font-medium inline-flex items-center gap-1"
                >
                  Message on WhatsApp &rarr;
                </a>
              </li>
            </ul>
          </div>
        </div>

        <div class="border-t border-stone-800 mt-16 pt-8 text-center text-xs text-stone-600">
          <p>&copy; {new Date().getFullYear()} {BUSINESS_NAME}. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <style is:global>
      :root {
        --font-poppins: 'Poppins', sans-serif;
        --font-outfit: 'Outfit', sans-serif;
      }
      
      h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-outfit);
      }
      
      body {
        font-family: var(--font-poppins);
      }

      html {
        scroll-behavior: smooth;
      }
    </style>

    <!-- ============================================ -->
    <!-- SUPABASE CLIENT-SIDE SCRIPTS -->
    <!-- ============================================ -->
    <!-- Supabase JS CDN -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Environment Variables for Client-Side -->
    <script is:inline define:vars={{ 
      SUPABASE_URL: import.meta.env.PUBLIC_SUPABASE_URL,
      SUPABASE_ANON_KEY: import.meta.env.PUBLIC_SUPABASE_ANON_KEY,
      WHATSAPP_NUMBER: WHATSAPP_NUMBER
    }}>
      // Make environment variables available to client-side scripts
      window.ENV = {
        SUPABASE_URL: SUPABASE_URL,
        SUPABASE_ANON_KEY: SUPABASE_ANON_KEY,
        WHATSAPP_NUMBER: WHATSAPP_NUMBER
      };
    </script>

    <!-- Properties Component -->
    <script is:inline src="/properties-component.js"></script>
  </body>
</html>
