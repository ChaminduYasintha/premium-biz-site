<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Admin Panel - Supabase CMS</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üè† Property Management</h1>
                <p class="subtitle">Supabase CMS Admin Panel</p>
            </div>
            <div class="header-actions">
                <button id="viewPropertiesBtn" class="btn-secondary">View All Properties</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Add Property Form -->
            <div class="card">
                <div class="card-header">
                    <h2>Add New Property</h2>
                    <p class="card-description">Fill in the details below to add a new property listing</p>
                </div>

                <form id="propertyForm" class="form">
                    <!-- Title -->
                    <div class="form-group">
                        <label for="title" class="form-label">
                            Property Title <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="title" 
                            name="title" 
                            class="form-input" 
                            placeholder="e.g., Luxury Villa in Kandy"
                            required
                        >
                    </div>

                    <!-- Price & City Grid -->
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="price" class="form-label">
                                Price (LKR) <span class="required">*</span>
                            </label>
                            <input 
                                type="number" 
                                id="price" 
                                name="price" 
                                class="form-input" 
                                placeholder="50000000"
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label for="city" class="form-label">
                                City <span class="required">*</span>
                            </label>
                            <select id="city" name="city" class="form-select" required>
                                <option value="">Select a city</option>
                                <option value="Colombo">Colombo</option>
                                <option value="Kandy">Kandy</option>
                                <option value="Galle">Galle</option>
                                <option value="Nuwara Eliya">Nuwara Eliya</option>
                                <option value="Jaffna">Jaffna</option>
                                <option value="Negombo">Negombo</option>
                            </select>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label for="description" class="form-label">
                            Description
                        </label>
                        <textarea 
                            id="description" 
                            name="description" 
                            class="form-textarea" 
                            rows="5"
                            placeholder="Detailed description of the property, amenities, location, etc."
                        ></textarea>
                    </div>

                    <!-- Image Upload -->
                    <div class="form-group">
                        <label for="image" class="form-label">
                            Main Photo <span class="required">*</span>
                        </label>
                        <div class="file-input-wrapper">
                            <input 
                                type="file" 
                                id="image" 
                                name="image" 
                                class="file-input" 
                                accept="image/*"
                                required
                            >
                            <label for="image" class="file-input-label">
                                <span class="file-icon">üìÅ</span>
                                <span id="fileName">Choose an image file</span>
                            </label>
                        </div>
                        <div id="imagePreview" class="image-preview hidden">
                            <img id="previewImg" src="" alt="Preview">
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="submit" id="submitBtn" class="btn-primary">
                            <span id="submitText">Save Property</span>
                            <span id="loadingSpinner" class="spinner hidden"></span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Properties List -->
            <div class="card" id="propertiesList" style="display: none;">
                <div class="card-header">
                    <h2>All Properties</h2>
                    <button id="hidePropertiesBtn" class="btn-secondary-small">Hide List</button>
                </div>
                <div id="propertiesContainer" class="properties-grid">
                    <!-- Properties will be loaded here -->
                </div>
            </div>
        </main>

        <!-- Toast Notification -->
        <div id="toast" class="toast hidden">
            <span id="toastMessage"></span>
        </div>

        <!-- Setup Instructions (shown if not configured) -->
        <div id="setupModal" class="modal hidden">
            <div class="modal-content">
                <h2>‚öôÔ∏è Supabase Setup Required</h2>
                <p>Please configure your Supabase credentials in <code>config.js</code></p>
                <ol class="setup-instructions">
                    <li>Go to your <a href="https://supabase.com/dashboard" target="_blank">Supabase Dashboard</a></li>
                    <li>Copy your Project URL and Anon Key from Settings ‚Üí API</li>
                    <li>Update the <code>config.js</code> file</li>
                    <li>Create the <code>properties</code> table and <code>property-images</code> storage bucket</li>
                </ol>
                <button onclick="closeSetupModal()" class="btn-primary">Got it!</button>
            </div>
        </div>
    </div>

    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Configuration -->
    <script src="config.js"></script>
    
    <!-- Main App Script -->
    <script src="app.js"></script>
</body>
</html>
